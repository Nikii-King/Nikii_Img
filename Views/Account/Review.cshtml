@model IEnumerable<Nikii_Pic.Models.User>
@{
    ViewBag.Title = "用户审核中心";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}
<style>
    .review-card {
        max-width: 900px;
        margin: 40px auto 0 auto;
        background: rgba(20,30,48,0.98);
        border-radius: 22px;
        box-shadow: 0 8px 32px rgba(28,181,224,0.18);
        padding: 36px 36px 28px 36px;
        color: #fff;
    }
    .review-title {
        font-size: 2rem;
        font-weight: 800;
        letter-spacing: 2px;
        margin-bottom: 24px;
        text-align: center;
    }
    .review-table th, .review-table td {
        color: #fff;
        vertical-align: middle;
        font-size: 1.08rem;
    }
    .review-table th {
        background: linear-gradient(90deg,#1cb5e0 0%,#ff4081 100%);
        border: none;
    }
    .review-table td {
        background: rgba(255,255,255,0.05);
        border: none;
    }
    .review-btn {
        border-radius: 18px;
        min-width: 80px;
        margin-right: 8px;
        font-weight: 700;
        font-size: 1.05rem;
        box-shadow: 0 2px 8px #1cb5e033;
        transition: background 0.2s;
    }
    .review-btn-success { background: #1cb5e0; color: #fff; border: none; }
    .review-btn-success:hover { background: #00bcd4; }
    .review-btn-danger { background: #ff4081; color: #fff; border: none; }
    .review-btn-danger:hover { background: #e91e63; }
</style>
<div class="review-card">
    <div class="review-title">用户审核中心</div>
    <div class="text-end mb-3">
        <a href="/Account/Review?showHistory=true" class="btn btn-outline-info" style="border-radius:16px;font-weight:700;">查看历史</a>
    </div>
    @if (!Model.Any())
    {
        <div class="text-center text-success">暂无待审核用户</div>
    }
    else
    {
        <table class="table review-table">
            <thead>
                <tr>
                    <th>用户名</th>
                    <th>邮箱</th>
                    <th>注册时间</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var user in Model)
            {
                <tr data-id="@user.Id">
                    <td>@user.UserName</td>
                    <td>@user.Email</td>
                    <td>@user.RegisterTime.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>
                        <button class="review-btn review-btn-success" onclick="approveUser(@user.Id, this)">通过</button>
                        <button class="review-btn review-btn-danger" onclick="rejectUser(@user.Id, this)">拒绝</button>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }
</div>
@section Scripts {
<script>
function approveUser(id, btn) {
    if (!confirm('确定通过该用户审核？')) return;
    $.post('/Account/Approve', { id: id }, function () {
        $(btn).closest('tr').fadeOut(300, function(){ $(this).remove(); });
        alert('审核通过，已通知用户！');
    });
}
function rejectUser(id, btn) {
    if (!confirm('确定拒绝该用户？')) return;
    $.post('/Account/Reject', { id: id }, function () {
        $(btn).closest('tr').fadeOut(300, function(){ $(this).remove(); });
        alert('已拒绝该用户并通知对方！');
    });
}
</script>
} 